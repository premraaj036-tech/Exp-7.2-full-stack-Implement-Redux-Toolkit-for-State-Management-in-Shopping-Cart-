import React from "react";
import { Provider, useDispatch, useSelector } from "react-redux";
import { store } from "./store";
import {
addToCart,
removeFromCart,
increaseQty,
decreaseQty,
} from "./cartSlice";
import "./App.css";

const products = [
{ id: 1, name: "Laptop", price: 55000 },
{ id: 2, name: "Phone", price: 25000 },
{ id: 3, name: "Headphones", price: 3000 },
];

function ProductList() {
const dispatch = useDispatch();

return (
<div className="products">
{products.map((p) => (
<div key={p.id} className="product-card">
<h3>{p.name}</h3>
<p>‚Çπ{p.price}</p>
<button onClick={() => dispatch(addToCart(p))}>Add to Cart</button>
</div>
))}
</div>
);
}

function Cart() {
const cartItems = useSelector((state) => state.cart.items);
const dispatch = useDispatch();

return (
<div className="cart">
<h2>üõí Shopping Cart</h2>
{cartItems.length === 0 ? (
<p>No items in cart.</p>
) : (
cartItems.map((item) => (
<div key={item.id} className="cart-item">
<h4>{item.name}</h4>
<p>‚Çπ{item.price}</p>
<p>Qty: {item.quantity}</p>
<button onClick={() => dispatch(increaseQty(item.id))}>+</button>
<button onClick={() => dispatch(decreaseQty(item.id))}>-</button>
<button onClick={() => dispatch(removeFromCart(item.id))}>
Remove
</button>
</div>
))
)}
</div>
);
}

function App() {
return (
<Provider store={store}>
<div className="App">
<h1>üõç Simple Shopping Cart (Redux Toolkit)</h1>
<ProductList />
<Cart />
</div>
</Provider>
);
}

export default App;
